version: 1.0.{build}
branches:
  only:
  - Mono
skip_tags: true
image: Ubuntu1604
configuration: Mono - Release
platform: x86
assembly_info:
  patch: true
  file: Properties\AssemblyInfo.cs
  assembly_version: '{version}'
  assembly_informational_version: '{version}'
nuget:
  account_feed: true
  project_feed: true
  disable_publish_on_pr: true
  disable_publish_octopus: true
build_script:
- sh: >-
    TOP=`pwd`

    nuget restore

    msbuild /p:"Configuration=Mono - Release" /p:"Platform=Any CPU"

    ZIPNAME="${TOP}/Ketarin-Mono-${APPVEYOR_BUILD_VERSION}.zip"

    cd "${APPVEYOR_BUILD_FOLDER}/bin/Mono - Release/"

    zip -9rp ${ZIPNAME} *
artifacts:
- path: Ketarin-Mono-${APPVEYOR_BUILD_VERSION}.zip
  name: Ketarin-Mono-${APPVEYOR_BUILD_VERSION}.zip
deploy:
- provider: GitHub
  release: Ketarin-Mono-${APPVEYOR_BUILD_VERSION}
  auth_token:
    secure: /e1bIobrUwT05baBOG8YBiBgQAQRpEP5XfMcnhKszh9+8ypAqAaGxh+WELR5ctJC
  repository: franc6/Ketarin
  artifact: Ketarin-Mono-${APPVEYOR_BUILD_VERSION}.zip
  prerelease: true